<?xml version="1.0" encoding="utf-8"?>
<model version="NetLogo 7.0.0" snapToGrid="false">
  <code><![CDATA[extensions[palette]

breed [nuclei nucleus]
breed [cytoplasm cytoplasmic-fluid]


cytoplasm-own [
  carrying-signal ; Used to modulate signal strength when particle is carrying food
  velocity ; The current velocity of the particle
]

patches-own [
  cp-fluid
  wall?
  food
]

to setup
  clear
  if setup-choice = "single-nucleus" [setup-single-nucleus]
  if setup-choice = "multi-nucleate" [setup-multi-nucleate]
  if setup-choice = "shortest-path" [setup-shortest-path shortest-path-parameters]
end


; These parameters are default because they offer a balance between performance and demonstrating the model's capabilities
to default-parameters
  set max-fluid-particles 10000
  set total-fluid-volume 50
  set diffusion-proportion 0.5
  set food-signal-boost 20
  set eat-proportion 0
  set signal-lifetime 50
  set fluid-turbulence 10
  set movement-speed 100
end


; These parameters differ to exaggerate the effect of food on the network,
; so that they may demonstrate the shortest-path finding ability in the shortest-path demo
to shortest-path-parameters
  set max-fluid-particles 3000
  set total-fluid-volume 25
  set diffusion-proportion 0.5
  set food-signal-boost 50
  set eat-proportion 0
  set signal-lifetime 100
  set fluid-turbulence 5
  set movement-speed 100
end


; resets the world state
to clear
  clear-all

  ; Initializing patch values
  ask patches [
    set wall? false
    set food 0
  ]

  reset-ticks
end



; A setup with a single nucleus in the middle; DEFAULT
to setup-single-nucleus
  create-nuclei 1 [
      set shape "circle"
      set size 5
      set color white
      setxy 0 0
    ]
  tick
end


; A slightly more elaborate setup that demonstrates the multi-nucleate
; nature of the network, as well as how it interacts with food
to setup-multi-nucleate
  create-nuclei 1 [
      set shape "circle"
      set size 5
      set color white
      setxy -30 0
    ]

  create-nuclei 1 [
      set shape "circle"
      set size 5
      set color white
      setxy 30 0
    ]

  draw-selection -5 -5 10 10 "food"

  tick
end



; A setup designed to demonstrate the ability of the network
; to find the shortest path length between food sources
to setup-shortest-path

  ; Creating the walled environment
  draw-box -50 -50 100 100 3
  draw-line -40 -17 80 57 "h"
  draw-line -38 -50 76 12 "h"

  draw-line -50 -50 20 12 "v"
  draw-line -40 -20 20 2 "v"

  draw-line 38 -50 20 12 "v"
  draw-line 38 -20 20 2 "v"

  draw-line -35 -26 70 2 "h"

  draw-line -35 -34 8 2 "v"
  draw-line -25 -34 8 2 "v"
  draw-line -15 -34 8 2 "v"
  draw-line 33 -34 8 2 "v"
  draw-line 23 -34 8 2 "v"
  draw-line 13 -34 8 2 "v"

  draw-line -30 -38 8 2 "v"
  draw-line -20 -38 8 2 "v"
  draw-line 28 -38 8 2 "v"
  draw-line 18 -38 8 2 "v"

  draw-line -14 -30 27 4 "h"
  draw-line -9 -38 19 4 "h"


  ; Placing food at path ends
  draw-selection -44 -26 6 2 "food"
  draw-selection 38 -26 6 2 "food"

  ; Placing a nucleus at the top
  create-nuclei 1 [
    set shape "circle"
    set size 5
    set color white
    setxy 0 43
  ]

end


to draw

  ; Handles the user draw function that allows for creation of
  ; the custom environment

  ; These should be drawn continuously
  if draw-choice = "Wall" [draw-wall]
  if draw-choice = "Food" [place-food]

  ; We only want one nucleus per click
  if draw-choice = "Nucleus" [
    let clicked? false
    while [mouse-down?] [
      if not clicked? [
        place-nucleus
        set clicked? true
      ]
    ]
  ]
end


;; ----- GO PROCEDURES -----



to go
  spawn-cytoplasm
  disperse-fluid
  move
  update-colors
  tick
end




to spawn-cytoplasm

  ; Handles spawning behavior for cytoplasmic fluid particles

  ; Variable initialization
  ; For each tick, calculate how many fluid agents remain unspawned
  let remaining max-fluid-particles - count cytoplasm
  let proportion 0.01  ; arbitrary value; how quickly fluid agents will spawn
  let spawn-count round(remaining * proportion)

  ; If the spawn-count is rounded to zero but remaining is greater than zero,
  ; we ensure that at least one particle will spawn
  if remaining > 0 [set spawn-count spawn-count + 1]

  ; Controls how cytoplasm fluid particles spawn relative to nuclei
  ask nuclei [
    if spawn-count > 0 [
      hatch-cytoplasm spawn-count [
        set velocity 1
        set carrying-signal 0
        rt random 360
        fd random 3
        hide-turtle
      ]
    ]
  ]
end


to disperse-fluid

  ; Controls the dispersion of fluid into the network

  ; Variable initialization
  ; Determine strength of signaling molecule from nutritive fluid
  ; Determine a rate of fluid decay for each patch based on the
  ; total allowable volume of fluid per agent
  let signal-boost food-signal-boost / 100
  let decay-rate (100 - total-fluid-volume) / 1000
  let max-cp max [cp-fluid] of patches
  if max-cp = 0 [set max-cp 0.1] ; avoids initial division by zero

  ; Nuclei need to emit fluid of their own to solidify their place in the network.
  ask nuclei [
    ask patches in-radius 3 [
      set cp-fluid 1
    ]
  ]

  ; Fluid particles need to distribute fluid. Value is modulated according
  ; to presence of signaling molecule (response to nutritive fluid)
  ask cytoplasm [
    if-else carrying-signal > 0 [
      set cp-fluid 1 + (signal-boost * (carrying-signal / signal-lifetime))
    ] [
      ; Rather than setting the patch fluid value to 1, we need to ensure that we only ever RAISE it to 1.
      ; This implementation ensures a non-food carrying fluid particle never sets the fluid concentration of a patch to a value
      ; LOWER than what it currently is. This also ensures that if two fluid particles occupy the same patch and only one is
      ; carrying a food signal, the patch will always receive the higher fluid concentration as is expected.
      if cp-fluid < 1 [set cp-fluid 1]
    ]
  ]

  ; Fluid spreads out over time. Altering this value will change how
  ; tightly the walls of each tube are defined.
  diffuse cp-fluid diffusion-proportion

  ; The cytoplasmic fluid that each agent represents needs to follow
  ; them over time, trails must decay over time.
  ask patches [
    if cp-fluid > decay-rate [

      ; The rate of fluid decay must be graded relative to the maximum fluid concentration in order
      ; to give network structures some staying power. This is an attempt, albeit a very basic one,
      ; to implement the cytoskeletal tube structures of real physarum polycephalum. Without this gradation
      ; in decay rate, network structures become wildly dynamic and quite sparse, as no structure that forms
      ; has anything 'holding' it in place. This is a weak mechanism that grants highly established network
      ; structures (those with the most fluid agents constantly occupying them) some permanence within the
      ; plasmodic network.
      set cp-fluid cp-fluid - (decay-rate * (1 - cp-fluid / max-cp))
    ]
  ]

  ; Remove any fluid that seeps into walls, or was present beforehand
  ask patches with [wall?] [
    set cp-fluid 0
  ]
end


to move

  ; Handles movement of the cytoplasmic fluid particles

  ; Cytoplasmic-fluid agent control flow
  ask cytoplasm [

    ; The following can occur if the user draws over existing agents with a wall
    if wall? = true [die]

    ; Eat if we can eat
    if food > 0 [eat]

    ; Propagate food signals to other fluid agents
    propagate-signal

    ; Fluid agents only 'look' ahead in the sense that fluid flows along
    ; tubes that have already formed, far less frequently straying to create
    ; new tubes. The likelihood of agents straying to create new tubes
    ; is dictated by the wobble value.
    let r patch-right-and-ahead 45 1
    let l patch-left-and-ahead 45 1
    let f patch-ahead 1

    ; Checking if the forward patch is a wall
    if-else ([wall?] of f) [
      ; We actively turn away from / avoid walls; mold can not grow there.
      ; This may be interpreted as the fluid 'bouncing' off of the wall upon impact
      rt 180
      wobble fluid-turbulence
    ]
    [
      ; In all other cases, we move in the direction of the tube
      ; (in this case, the direction in front of us with the highest fluid concentration)
      let xset (patch-set l r f)
      face max-one-of xset [cp-fluid]

      ; Random fluid turbulence
      wobble fluid-turbulence
    ]

    ; Fluid velocity is proportional to the strength / size of the tube.
    ; larger tubes are represented by higher fluid concentrations
    set velocity cp-fluid * (movement-speed / 100)
    fd velocity
  ]
end


to propagate-signal
  ; Agents that are carrying molecular signal must spread that signal to other agents
  if carrying-signal > 0 [

    ; The signal received by other turtles should be the maximum between what
    ; they currently have and what they are passing by. Turtles with higher signal
    ; values should not inherit lower ones
    let spread carrying-signal

    ask other cytoplasm-here [

      ; Transmission of the signal must also reduce its strength,
      ; as the molecule must travel some additional distance to reach the target of transmission.

      ; This does not violate conservation of matter; the fluid particle should not be conceived of as inheriting
      ; some quantity of matter, but rather something akin to being tagged by a trace chemical agent
      ; with a very specific lifetime / half life.
      set carrying-signal max (list carrying-signal (spread - 1))
    ]

    ; Signal lifetime must decrement once per tick.
    ; The molecular signal strength is inversely proportional its
    ; current distance travelled from its own point of origin (where the food is)
    set carrying-signal carrying-signal - 1
  ]
end


to eat

  ; This functions controls the eating behavior of fluid agents

  ; Remove food from the patch
  set food food - eat-proportion

  ; Fluid is now carrying the molecular signal
  set carrying-signal signal-lifetime
end



to wobble [x]
  ; This function controls the random movements of the fluid agents
  rt random x
  lt random x
end




to update-colors

  ; Mold networks can be visualized 'realistically' or
  ; proportional to the local velocities.

  if-else visualize-velocity? [

  ; real-time visualization of the varying velocities of
  ; cytoplasmic fluid particles within the network. Color is representative
  ; of the maximal fluid particle velocity for a given patch

    if any? cytoplasm [
      let highest max [velocity] of cytoplasm
      ask patches [
        let x max-one-of cytoplasm-here [velocity]
        if-else x != nobody [
          let v ([velocity] of x) / highest
          set pcolor palette:scale-gradient [[0 255 25] [255 255 0] [255 0 0]] v 0.7 1
        ]
        [
          set pcolor black
        ]
      ]
    ]
  ]


  ; 'realistic' representation of the slime-mold
  [
    ask patches
    [
      let signal-boost food-signal-boost / 100
      if-else cp-fluid <= 1 [
        ; Gradient represents the strength of the tube / fluid concentration
        set pcolor palette:scale-gradient [[0 0 0] [255 255 255]] cp-fluid 0 1
      ]
      [
        ; Identify fluid carrying the signaling molecule
        if-else visualize-signaling-molecule?
        [set pcolor yellow]
        [set pcolor white]
      ]
    ]
  ]

  ; In either visualization case, we want to render both food
  ; and walls individually.
  ask patches [
    if food > 0 [set pcolor yellow]
    if wall? = true [set pcolor red]
  ]
end

to draw-wall

  ; This function allows the user to draw walls
  ; that the mold will be forced to avoid

  while [mouse-down?] [
    ask patch mouse-xcor mouse-ycor [
      ask patches in-radius brush-size [
        if-else eraser
        [set wall? false]
        [set wall? true]
      ]
    ]
    update-colors
    tick
  ]
end

to place-nucleus

  ; This allows the user to place mold nuclei. P. Polycephalum are
  ; multi-nucleate organisms, so multiple nuclei can exist simultaneously

  if mouse-down? [
    create-nuclei 1 [
      set shape "circle"
      set size 5
      set color white
      setxy mouse-xcor mouse-ycor
    ]
    tick
  ]
end

to place-food

  ; Allows the user to place nutritive fluid that stimulates the
  ; mold network, acting as a source of the signaling molecule that
  ; the mold will respond to.

  while [mouse-down?] [
    ask patch mouse-xcor mouse-ycor [
      ask patches in-radius brush-size [
        if-else eraser
        [set food 0]
        [set food 1]
      ]
    ]
    update-colors
    tick
  ]
end




;; ----- PROCEDURES FOR DRAWING WALLS -----

; draws a box wall formation
to draw-box [x y width height thick]

  ; horizontal components
  draw-line x y width thick "h"
  draw-line x (y + height - thick) width thick "h"

  ; vertical components
  draw-line x y height thick "v"
  draw-line (x + width - thick) y height thick "v"


end


; given an orientation "h" or "v" draws a line
to draw-line [x y len thick orientation]
  if orientation = "v" [
    draw-vertical-line x y len thick
    stop
  ]

  if orientation = "h" [
    draw-horizontal-line x y len thick
    stop
  ]

end


; draws a horizontal line
to draw-horizontal-line [x y len thick]
  draw-selection x y len thick "wall"
end

; draws a vertical line
to draw-vertical-line [x y len thick]
  draw-selection x y thick len "wall"
end


; fills a rectangular patch selection with either wall or food
to draw-selection [x y width height wall-or-food]

  let selected (select-rectangle x y width height)

  if-else wall-or-food = "food"
  [foreach selected [p -> ask p [set food 1]]]
  [foreach selected [p -> ask p [set wall? true]]]

  update-colors
  tick

end


; Given a starting coordinate and dimensions, returns a patch-set corresponding to that area
; ** Coordinate starts at bottom left of the selection **
to-report select-rectangle [x y width height]

  ; Initialization
  let selected []
  let x-counter 0
  let y-counter 0

  ; Double loop to grab all values in a rectangular area
  while [x-counter < width] [
    set y-counter 0
    while [y-counter < height] [
      set selected lput (patch (x + x-counter) (y + y-counter)) selected
      set y-counter y-counter + 1
    ]
    set x-counter x-counter + 1
  ]

  report selected

end


; Copyright 2021 Uri Wilensky.
; See Info tab for full copyright and license.]]></code>
  <widgets>
    <view x="210" maxPycor="100" updateMode="1" wrappingAllowedX="true" y="10" frameRate="30.0" minPycor="-100" height="612" showTickCounter="true" patchSize="3.0" fontSize="10" wrappingAllowedY="true" width="611" tickCounterLabel="ticks" maxPxcor="100" minPxcor="-100"></view>
    <slider x="33" step="1" y="80" height="33" min="0" direction="Horizontal" max="30000" default="10000.0" variable="max-fluid-particles" width="172" sizeVersion="0" display="max-fluid-particles"></slider>
    <button x="840" y="67" height="33" disableUntilTicks="false" forever="false" kind="Observer" width="63">setup
</button>
    <button x="904" y="67" height="33" disableUntilTicks="true" forever="true" kind="Observer" width="63">go</button>
    <slider x="33" step="1" y="113" height="33" min="0" direction="Horizontal" max="99" default="50.0" variable="total-fluid-volume" units="%" width="172" sizeVersion="0" display="total-fluid-volume"></slider>
    <slider x="33" step="0.01" y="146" height="33" min="0" direction="Horizontal" max="1" default="0.5" variable="diffusion-proportion" width="172" sizeVersion="0" display="diffusion-proportion"></slider>
    <slider x="933" step="1" y="151" height="33" min="0" direction="Horizontal" max="5" default="5.0" variable="brush-size" width="92" sizeVersion="0" display="brush-size"></slider>
    <switch x="933" y="185" height="33" on="false" variable="eraser" width="92" sizeVersion="0" display="eraser"></switch>
    <slider x="33" step="0.1" y="209" height="33" min="0" direction="Horizontal" max="100" default="20.0" variable="food-signal-boost" units="%" width="172" sizeVersion="0" display="food-signal-boost"></slider>
    <button x="840" y="407" height="33" disableUntilTicks="false" forever="false" kind="Observer" width="183" display="Remove-Slime-Mold">clear-turtles</button>
    <button x="840" y="441" height="33" disableUntilTicks="false" forever="false" kind="Observer" width="183" display="Remove Cytoplasmic Fluid">ask turtles with [breed = cytoplasm] [die]</button>
    <monitor x="840" precision="17" y="475" height="45" fontSize="11" width="183" sizeVersion="0" display="Cytoplasmic Fluid Particles">count turtles with [breed = cytoplasm]</monitor>
    <slider x="33" step="0.01" y="243" height="33" min="0.00" direction="Horizontal" max="1" default="0.0" variable="eat-proportion" width="172" sizeVersion="0" display="eat-proportion"></slider>
    <monitor x="840" precision="17" y="521" height="45" fontSize="11" width="183" sizeVersion="0" display="Food Particles in the Network"><![CDATA[count cytoplasm with [carrying-signal > 0]]]></monitor>
    <slider x="33" step="1" y="337" height="33" min="0" direction="Horizontal" max="25" default="10.0" variable="fluid-turbulence" width="172" sizeVersion="0" display="fluid-turbulence"></slider>
    <slider x="33" step="0.1" y="370" height="33" min="1" direction="Horizontal" max="100" default="100.0" variable="movement-speed" units="%" width="172" sizeVersion="0" display="movement-speed"></slider>
    <switch x="840" y="339" height="33" on="false" variable="visualize-velocity?" width="183" sizeVersion="0" display="visualize-velocity?"></switch>
    <chooser x="840" y="185" height="45" variable="draw-choice" current="2" width="92" sizeVersion="0" display="draw-choice">
      <choice type="string" value="Wall"></choice>
      <choice type="string" value="Food"></choice>
      <choice type="string" value="Nucleus"></choice>
    </chooser>
    <button x="840" y="151" height="33" disableUntilTicks="true" forever="true" kind="Observer" width="92">draw</button>
    <slider x="33" step="1" y="277" height="33" min="1" direction="Horizontal" max="100" default="50.0" variable="signal-lifetime" width="172" sizeVersion="0" display="signal-lifetime"></slider>
    <note x="36" y="322" height="18" backgroundDark="0" textColorLight="-16777216" backgroundLight="0" fontSize="12" width="150">Fluid Movement</note>
    <note x="36" y="194" height="18" backgroundDark="0" textColorLight="-16777216" backgroundLight="0" fontSize="12" width="150">Nutritive Stimuli</note>
    <note x="34" y="65" height="18" backgroundDark="0" textColorLight="-16777216" backgroundLight="0" fontSize="12" width="189">Fluid Volume / Tube Strength</note>
    <note x="45" y="34" height="34" backgroundDark="0" textColorLight="-16777216" backgroundLight="0" fontSize="14" width="159">MODEL PARAMETERS</note>
    <switch x="840" y="373" height="33" on="false" variable="visualize-signaling-molecule?" width="183" sizeVersion="0" display="visualize-signaling-molecule?"></switch>
    <chooser x="840" y="102" height="45" variable="setup-choice" current="1" width="127" sizeVersion="0" display="setup-choice">
      <choice type="string" value="single-nucleus"></choice>
      <choice type="string" value="multi-nucleate"></choice>
      <choice type="string" value="shortest-path"></choice>
      <choice type="string" value="clear"></choice>
    </chooser>
    <button x="50" y="419" height="33" disableUntilTicks="false" forever="false" kind="Observer" width="138" display="Reset Parameters">default-parameters</button>
    <note x="846" y="33" height="34" backgroundDark="0" textColorLight="-16777216" backgroundLight="0" fontSize="14" width="186">ENVIRONMENT CONTROL</note>
    <note x="854" y="307" height="18" backgroundDark="0" textColorLight="-16777216" backgroundLight="0" fontSize="14" width="195">VISUALIZATION TOOLS</note>
  </widgets>
  <info><![CDATA[## WHAT IS IT?

This model emulates the growth and reaction to nutritive stimuli of Physarum Polycephalum, an acellular multi-nucleate amoeba more commonly referred to as a slime-mold. Their growth is modulated by varying velocities of cytoplasmic fluid found within the reticluted tubes that they develop in order to explore their environment. When the slime-mold finds food, it releases a molecular signaling agent that dilates the tubes, increasing fluid velocity and flow to that region. The changing fluid velocities found within the network change how it grows and retracts over time.

## HOW PHYSARUM POLYCEPHALUM WORKS

Physarum Polycephalum explores its environment by expanding a network of reticulated tubes. These tubes contain an actin-mytosin cytoskeleton outer layer, which periodically contracts in a peristaltic wave-motion across the network to propel cytoplasmic fluid housed inside. These tube networks provide the organism with a food transport network. (Alim).

P. Polycephalum uses these basic mechanisms to demonstrate complex behavior, such as navigating mazes to find the shortest route between food sources, and using said path-finding ability to reconstruct transportation maps of different cities (Alim).

Large cities typically aim to optimize public transportation routes by reducing path length between stations, saving the city money and the passengers their time. The ability to recreate these public transport maps when given the station locations, then, should be indicative of some kind of path finding ability. When food is laid out on a flat surface with the same relative positions as the public transport stations in downtown Tokyo, Physarum Polycephalum is able to construct a plasmodic network with strongest paths that are remarkably similar in shape and structure to the actual transportation maps, indicating that it has found optimized path lengths (Alim).

## HOW THIS MODEL WORKS

Nucleus agents are responsible for spawning fluid agents, and act as the starting point of a plasmodic network.
At every tick, each nucleus agent will perform the following actions in order:

 - Determine the difference between the maximum number of fluid particles and the current number
 - Calculate some integer value of fluid particles to spawn based on a proportion of the previous value
 - Spawn that many fluid particles in its close vicinity
 - Set the amount of fluid in their current patches to 1

Fluid agents represent the cytoplasmic fluid found within the cytoskeletal tubes of the network. They have properties that correspond to the strength of the chemical signal that is released when they find food, as well as their current velocity.
At every tick, each fluid agent will perform the following actions in order:

 - Set the amount of fluid in their current patch to 1, or more than 1 if carrying a food signal. The extra amount is modulated by the food-signal-boost parameter.
 - If they currently inhabit a patch that contains a wall, die
 - If they currently inhabit a patch that contains food, they will remove some proportion of food from the current patch determined by the eat-proportion parameter, and gain a food signal value determined by the signal-lifetime parameter.
 - If carrying a food signal, other fluid agents that occupy the same patch in this tick will receive a food signal of the same value minus one. If another fluid agent in the same patch is carrying a food signal with a higher value, they will not inherit the food signal of lower value.
 - Determine the fluid concentrations (patch fluid value) of 3 patches in front of them. These patches are always a distance of 1 patch away, and are measured 45 degrees to the left of, directly in front of, and 45 degrees to the right of the agent.
 - If a wall is ahead, immediately turn 180 degrees
 - Otherwise, determine the heading with the highest fluid concentration (the max of the 3 patches measured earlier), and aim in the direction of the new heading
 - Apply a random rotation, where the upper bound of the random rotation value is determined by the fluid-turbulence parameter
 - Move 1 unit in the direction of the newly determined heading
 - If carrying a food signal, the value of the signal is decremented by 1

Patches in this model have properties corresponding to whether or not they represent a wall, as well as how much food they contain. Wall patches are represented in bright red, and patches with any non-zero amount of food are represented in bright yellow. Patches also have a property corresponding to their fluid concentration, which is represented by a black to white gradient where pure white is the highest fluid concentration.
At every tick, each patch will perform the following actions in order:

 - Diffuse some portion of its own fluid to the 8 patches immediately adjacent to itself. The total amount dispersed is less than the amount lost by the patch, such that the diffusion of fluid causes a loss in total fluid volume of the system.
 - If occupied by a fluid agent AND contains food, remove some proportion of the food from itself determined by the eat-proportion parameter
 - If it contains a wall, set the fluid concentration to 0, and kill any agents inside

## SIMPLIFYING ASSUMPTIONS AND LIMITATIONS

This model begins with the nuclei agents, which essentially act as cytoplasmic fluid generators. This is to some extent true in real life as well---the nuclei of P. Polycephalum act as its 'body', and cutting off or removing branches would not kill the organism. Fluid agents are spawned from these nuclei, and will begin branching out because of the innate randomness in their movements.

The model makes several simplifying assumptions in order to emulate the behavior of P. Polycephalum. First, agents are not simply representative of a single fluid particle, but rather a volume of fluid that is specified in the model parameters. When the user determines a value for the total volume of fluid that an agent can represent, under the hood they are actually changing the rate of fluid removal from the system at each location. When lower fluid volumes are allowed per agent, the fluid is removed more rapidly.

Second, agents (cytoplasmic fluid) are not walled off from the outside world in the way they would be in the real slime-mold due the reticulated tubes, but the way their movement is programmed allows them to act as such. When each fluid particle is asked to move, they first determine the direction of greatest fluid concentration ahead of them within a ~90 degree cone, and then move in that direction. This allows the fluid particles to flow in directions where fluid already exists and flows strongly, which emulates the behavior of a tube that would instead physically restrict fluid movement. However, this behavior allows already existing 'tubes' to branch off far more easily than their real life counterpart, as no physical barriers exist to prevent them from doing so. Consequently, simulated P. Polycephalum in this model is far more dynamic than its real life counterpart, and will change its structure in ways that real P. Polycephalum can not, such as merging branches or circular paths.

The mechanism by which agents escape existing branches to create new ones is modeled by 'fluid turbulence', which is essentially a degree of random movement that is added to the movement behavior previously described. In adding this degree of random movement, fluid particles are enabled to create new branches provided their new randomly determined heading is in a new direction. Set this value to 0 to understand why it is necessary for proper network formation. In real physarum polycephalum, the exact mechanism by which new branches are formed and how the location of their formation is determined is not precisely understood, but it's likely that similarly random mechanisms are involved to some extent. One other thing this model misses is that the degree to which branches explore new paths is modulated by the fluid velocity found within that branch, such that bigger, stronger branches (near food) will be more exploratory and resource-intensive than their non-food-finding counterparts.

Real Physarum Polycephalum reacts to a nutritive stimulus by sending a signaling molecule out from the point of contact, that both strengthens the peristaltic contraction of the local wall, and induces the release of the signaling molecule elsewhere in the network, albeit at a lower rate. The result is that tubes near food sources are strengthened, and because the amount of fluid in the network is constant (or at least not nearly as dynamic as its structure), the tubes that fail to find food or that are far away from food sources are dramatically weakened or even disappear. Because the fluid in this simulation all moves in parallel rather than through a peristaltic motion, the presence of the signaling molecule must instead modulate fluid velocity directly (we can not change the strength of the peristaltic contraction if no walls exist to contract). When a fluid particle is carrying a food signaling chemical, it is also more attractive to its neighbors in determining their direction of motion. The strength of this relationship is modulated by the 'food-signal-bonus' parameter, and different values will have wildly different outcomes depending on the values of the other model parameters. Because the chemical signal carried by the fluid must weaken over time, it decrements at every tick and at every transmission to other fluid particles.

## VISUALIZATION

Because of the inherent relationship between the strength of a tube and the velocity of the fluid found within, it should prove useful to visualize both of these dimensions of the network independently. The default view of the network is much closer to its real life counterpart, and will show the network's fluid concentration at each location. Be careful however---tube size does not always correlate with 'strength', or velocity.

By switching on visualize-velocity?, one can directly see the velocity of fluid agents in the network via color coding. Particles moving quickly are represented in red, while particles moving slowly are represented in green, with intermediate values being represented by shades in between.

## HOW TO USE IT

To begin, press the SETUP button which will initialize the world-state. This button can be pressed again at any time to reset everything in the environment. To create the environment, use the DRAW button to place P. Polycephalum nuclei, walls, and food. Four distinct setup environments exist to demonstrate different aspects of the model:

 - Single-nucleus (default): A world with a single nucleus in the middle
 - Multi-nucleate: A world with 2 nuclei on either side of a patch of food
 - Shortest-path: A world that demonstrates the ability of P Polycephalum to select the shortest-path
 - Clear: A completely blank world state

The BRUSH-SIZE slider can be used to adjust the size of the brush used to paint walls and food, and the eraser can be used to clean up mistakes or precisely refine the environment. Once the environment is ready, the GO button can be pressed to run the model. The model can be paused at any time by pressing the GO button again. The DRAW function maintains full functionality while the model is being simulated.

If at any time the user can't find their way back to sensible model parameters, the RESET-PARAMETERS button can be used to revert the model to default parameter values.

MAX-FLUID-PARTICLES: The maximum number of fluid particles that are to be simulated at any one time. The more particles there are, the larger the networks will become. Because the environment wraps, more particles beyond a certain point will produce a more robust network, rather than a larger one.

TOTAL-FLUID-VOLUME: This variable dictates the static amount of fluid any one particle is responsible for representing in a given moment. The higher this value, the more fluid is represented by a single fluid-particle. Fluid volume per particle is modulated by changing the rate at which fluid decays from each patch.

DIFFUSION-PROPORTION: This value controls the strength of the definition of the reticulated tube network. The higher the value, the more rigidly each tube is defined, and the more structured the network is likely to become. One may also conceptualize this as how 'zoomed in' one is in viewing the network.

FOOD-SIGNAL-BOOST: This is the mechanism currently implemented for how food motivates behavioral changes within the mold. The higher this value, the more attractive signal-carrying fluid flows are. Contact with any nutritive stimulus induces the release of a signaling molecule that spreads throughout the network, disproportionately affecting shorter tubes. Because the total fluid volume of the network is limited, diversion of fluid to these tubes causes atrophy of tubes elsewhere in the network.

EAT-PROPORTION: The proportion of food that gets carried away by a fluid particle when contacted. A value of 1 means that all food present at that patch gets carried by a single fluid particle when contact is made. A value of 0 creates a permanent nutritive stimulus at the target location. This can also be conceptualized as the viscosity of the nutritive substance, where values of 1 represent a highly mobile fluid and 0 represents a solid object.

Note that an EAT-PROPORTION of 0 will be appropriate most of the time, as real Physarum Polycephalum takes a very long time to absorb and digest food that it finds. The network needs time to adapt and grow properly around the stimulus, so removing it too quickly will result in little or no change. The highly dynamic nature of the network also lends itself to quickly returning to its previous structure once the nutritive stimulus is no longer present, so the effects are transient as long as the presence of the food is transient as well. Most food sources presented in the literature are also solids (grains or oats, for example).

FLUID-TURBULENCE: The amount of random variance in fluid particle movement within the tubes. Lower values will lead to more rigid structures. Higher values will lead to more tube branches within the network.

MOVEMENT-SPEED: Controls the maximum possible fluid velocity in the network. Lowering this value from 100% tends to make networks less complex and less reactive.

SETUP: clears the model visualization, resets all patch values to baseline, kills all agents

G0: runs the model

DRAW: Allows the user to draw or place the element currently selected by draw-choice. This allows the user to create custom environments to test different behaviors of the model

 - Wall: Places a wall while the mouse is held. The slime mold can not penetrate this wall, and actively avoids contact. Use this to constrain the movement of fluid particles and guide network formation
 - Food: Places a food of size brush-size at the mouse location. Food induces release of the signaling molecule.
 - Nucleus: places a single slime-mold nucleus

BRUSH-SIZE: Controls the size of the brush used to draw walls and food

ERASER: When on, switch to eraser mode. This will allow the user to erase walls and food rather than drawing them.

VISUALIZE-VELOCITY?: When on, switch visualization modes to visualize the velocity of fluid particles within the network, rather than total fluid. All particles become colored according to their velocity, where red represents the highest velocity particles in the network, and green the lowest. Velocity values are normalized to the interval [0, 1]  (with the highest and lowest velocity particles representing 1 and 0, respectively), which are then mapped to a green-red color gradient.

VISUALIZE-SIGNALING-MOLECULE?: When enabled, displays where in the plasmodic network food signal is being propagated. Because the signaling molecule produces signal strengths above what is normally possible, patches in which the signaling molecule is present are easy to identify by checking if they pass that threshold. All patches that exceed the threshold of what is normally possible are colored yellow in this visualization.

REMOVE-SLIME-MOLD: Kills all slime mold agents. Allows the user to 'reset' while preserving the custom environment.

REMOVE CYTOPLASMIC FLUID: Removes all cytoplasmic fluid (spares nuclei). Useful for preserving exact network / model setup when testing network formation from scratch with different model parameters.

## THINGS TO NOTICE

Notice how the strength of any given tube (its size) is proportional to its velocity. Switching between visualization modes is a great way to get an intuitive understanding of this mechanism. Notice how the weaker fringes of the network will appear green, and hot spots will appear red. In the standard visualization, these velocity differences will be reflected in the size of the respective tubes.

When placing nutritive stimuli (especially permanent stimuli with eat-proportion = 0), notice how the network will adapt to be significantly more developed around the area of the food source, both in the strength of the tubes surrounding the food and the number of branching paths. Use VISUALIZE-SIGNALLING-MOLECULE? to gain more precise intuitions about how this works.

## THINGS TO TRY

In order to best visualize path selection mechanisms, try to create environments in which paths have varying lengths. Remember that this is a process that occurs between food stimuli, rather than between food stimuli and nuclei.

One can visualize vastly different types of networks by changing the total fluid volume and diffusion proportion. Decreasing diffusion proportion will make tube edges harder, and increase the number of branching paths, while increasing it will make the network sparse.

All networks are highly reactive to changes in the food-signal-boost. There exists a very precise critical interval for any given set of model parameters (specifically with regard to fluid volume / diffusion) between which the behavior of the network in response to food changes dramatically. See if you can find this interval for a given set of model parameters, and watch how path formation differs across the input space for this parameter.

## EXTENSIONS

This model has fluid agents 'look ahead' only a single patch in order to determine their new heading. What would happen if this look-ahead distance was changed to 2 patches, or 3? What changes about the type of structures that are formed? Do any new patterns emerge? Does some consistent relationship exist between changes in the look ahead distance and consequent changes in network structure formation?

Right now agents can only move in one of 3 directions. What happens if agents are given more precision in the determination of their heading at each tick? What if, for example, probes for fluid concentration were not placed every 45 degrees within a 90 degree cone, but every 15 degrees within a 120 degree cone? What changes about their movement patterns?

## CREDITS AND REFERENCES

Jones, J. (2010). Characteristics of pattern formation and evolution in approximations of physarum transport networks. Artificial Life, 16(2), 127-153. https://doi.org/10.1162/artl.2010.16.2.16202

Karen Alim, Natalie Andrew, Anne Pringle, Michael P. Brenner. (2017). Mechanism of signal propagation in P. polycephalum. Proceedings of the National Academy of Sciences May 2017, 114 (20) 5136-5141; DOI: 10.1073/pnas.1618114114

## HOW TO CITE

If you mention this model or the NetLogo software in a publication, we ask that you include the citations below.

For the model itself:

* Heidacker, N. and Wilensky, U. (2021).  NetLogo .\Sample Models\Biology\Slime Mold Network model.  http://ccl.northwestern.edu/netlogo/models/.\SampleModels\Biology\SlimeMoldNetwork.  Center for Connected Learning and Computer-Based Modeling, Northwestern University, Evanston, IL.

Please cite the NetLogo software as:

* Wilensky, U. (1999). NetLogo. http://ccl.northwestern.edu/netlogo/. Center for Connected Learning and Computer-Based Modeling, Northwestern University, Evanston, IL.

This model was developed as part of the Spring 2021 Multi-agent Modeling course offered by Dr. Uri Wilensky at Northwestern University. For more info, visit http://ccl.northwestern.edu/courses/mam/. Special thanks to Teaching Assistants Jacob Kelter, Leif Rasmussen, and Connor Bain.

## COPYRIGHT AND LICENSE

Copyright 2021 Uri Wilensky.

![CC BY-NC-SA 3.0](http://ccl.northwestern.edu/images/creativecommons/byncsa.png)

This model is licensed under the Creative Commons Attribution-NonCommercial-ShareAlike 3.0 License.  To view a copy of this license, visit https://creativecommons.org/licenses/by-nc-sa/3.0/ or send a letter to Creative Commons, 559 Nathan Abbott Way, Stanford, California 94305, USA.

NetLogo itself is free software for non-commercial use under the terms of the GNU General Public License ([see full license information here](https://ccl.northwestern.edu/netlogo/docs/copyright.html)).

To inquire about commercial licenses for either NetLogo or specific models from the models library, please contact netlogo-commercial-admin@ccl.northwestern.edu.

<!-- 2021 MAM2021 Cite: Heidacker, N. -->]]></info>
  <turtleShapes>
    <shape name="default" rotatable="true" editableColorIndex="0">
      <polygon color="-1920102913" filled="true" marked="true">
        <point x="150" y="5"></point>
        <point x="40" y="250"></point>
        <point x="150" y="205"></point>
        <point x="260" y="250"></point>
      </polygon>
    </shape>
    <shape name="airplane" rotatable="true" editableColorIndex="0">
      <polygon color="-1920102913" filled="true" marked="true">
        <point x="150" y="0"></point>
        <point x="135" y="15"></point>
        <point x="120" y="60"></point>
        <point x="120" y="105"></point>
        <point x="15" y="165"></point>
        <point x="15" y="195"></point>
        <point x="120" y="180"></point>
        <point x="135" y="240"></point>
        <point x="105" y="270"></point>
        <point x="120" y="285"></point>
        <point x="150" y="270"></point>
        <point x="180" y="285"></point>
        <point x="210" y="270"></point>
        <point x="165" y="240"></point>
        <point x="180" y="180"></point>
        <point x="285" y="195"></point>
        <point x="285" y="165"></point>
        <point x="180" y="105"></point>
        <point x="180" y="60"></point>
        <point x="165" y="15"></point>
      </polygon>
    </shape>
    <shape name="arrow" rotatable="true" editableColorIndex="0">
      <polygon color="-1920102913" filled="true" marked="true">
        <point x="150" y="0"></point>
        <point x="0" y="150"></point>
        <point x="105" y="150"></point>
        <point x="105" y="293"></point>
        <point x="195" y="293"></point>
        <point x="195" y="150"></point>
        <point x="300" y="150"></point>
      </polygon>
    </shape>
    <shape name="box" rotatable="false" editableColorIndex="0">
      <polygon color="-1920102913" filled="true" marked="true">
        <point x="150" y="285"></point>
        <point x="285" y="225"></point>
        <point x="285" y="75"></point>
        <point x="150" y="135"></point>
      </polygon>
      <polygon color="-1920102913" filled="true" marked="true">
        <point x="150" y="135"></point>
        <point x="15" y="75"></point>
        <point x="150" y="15"></point>
        <point x="285" y="75"></point>
      </polygon>
      <polygon color="-1920102913" filled="true" marked="true">
        <point x="15" y="75"></point>
        <point x="15" y="225"></point>
        <point x="150" y="285"></point>
        <point x="150" y="135"></point>
      </polygon>
      <line endX="150" startY="285" marked="false" color="255" endY="135" startX="150"></line>
      <line endX="15" startY="135" marked="false" color="255" endY="75" startX="150"></line>
      <line endX="285" startY="135" marked="false" color="255" endY="75" startX="150"></line>
    </shape>
    <shape name="bug" rotatable="true" editableColorIndex="0">
      <circle x="96" y="182" marked="true" color="-1920102913" diameter="108" filled="true"></circle>
      <circle x="110" y="127" marked="true" color="-1920102913" diameter="80" filled="true"></circle>
      <circle x="110" y="75" marked="true" color="-1920102913" diameter="80" filled="true"></circle>
      <line endX="80" startY="100" marked="true" color="-1920102913" endY="30" startX="150"></line>
      <line endX="220" startY="100" marked="true" color="-1920102913" endY="30" startX="150"></line>
    </shape>
    <shape name="butterfly" rotatable="true" editableColorIndex="0">
      <polygon color="-1920102913" filled="true" marked="true">
        <point x="150" y="165"></point>
        <point x="209" y="199"></point>
        <point x="225" y="225"></point>
        <point x="225" y="255"></point>
        <point x="195" y="270"></point>
        <point x="165" y="255"></point>
        <point x="150" y="240"></point>
      </polygon>
      <polygon color="-1920102913" filled="true" marked="true">
        <point x="150" y="165"></point>
        <point x="89" y="198"></point>
        <point x="75" y="225"></point>
        <point x="75" y="255"></point>
        <point x="105" y="270"></point>
        <point x="135" y="255"></point>
        <point x="150" y="240"></point>
      </polygon>
      <polygon color="-1920102913" filled="true" marked="true">
        <point x="139" y="148"></point>
        <point x="100" y="105"></point>
        <point x="55" y="90"></point>
        <point x="25" y="90"></point>
        <point x="10" y="105"></point>
        <point x="10" y="135"></point>
        <point x="25" y="180"></point>
        <point x="40" y="195"></point>
        <point x="85" y="194"></point>
        <point x="139" y="163"></point>
      </polygon>
      <polygon color="-1920102913" filled="true" marked="true">
        <point x="162" y="150"></point>
        <point x="200" y="105"></point>
        <point x="245" y="90"></point>
        <point x="275" y="90"></point>
        <point x="290" y="105"></point>
        <point x="290" y="135"></point>
        <point x="275" y="180"></point>
        <point x="260" y="195"></point>
        <point x="215" y="195"></point>
        <point x="162" y="165"></point>
      </polygon>
      <polygon color="255" filled="true" marked="false">
        <point x="150" y="255"></point>
        <point x="135" y="225"></point>
        <point x="120" y="150"></point>
        <point x="135" y="120"></point>
        <point x="150" y="105"></point>
        <point x="165" y="120"></point>
        <point x="180" y="150"></point>
        <point x="165" y="225"></point>
      </polygon>
      <circle x="135" y="90" marked="false" color="255" diameter="30" filled="true"></circle>
      <line endX="195" startY="105" marked="false" color="255" endY="60" startX="150"></line>
      <line endX="105" startY="105" marked="false" color="255" endY="60" startX="150"></line>
    </shape>
    <shape name="car" rotatable="false" editableColorIndex="0">
      <polygon color="-1920102913" filled="true" marked="true">
        <point x="300" y="180"></point>
        <point x="279" y="164"></point>
        <point x="261" y="144"></point>
        <point x="240" y="135"></point>
        <point x="226" y="132"></point>
        <point x="213" y="106"></point>
        <point x="203" y="84"></point>
        <point x="185" y="63"></point>
        <point x="159" y="50"></point>
        <point x="135" y="50"></point>
        <point x="75" y="60"></point>
        <point x="0" y="150"></point>
        <point x="0" y="165"></point>
        <point x="0" y="225"></point>
        <point x="300" y="225"></point>
        <point x="300" y="180"></point>
      </polygon>
      <circle x="180" y="180" marked="false" color="255" diameter="90" filled="true"></circle>
      <circle x="30" y="180" marked="false" color="255" diameter="90" filled="true"></circle>
      <polygon color="255" filled="true" marked="false">
        <point x="162" y="80"></point>
        <point x="132" y="78"></point>
        <point x="134" y="135"></point>
        <point x="209" y="135"></point>
        <point x="194" y="105"></point>
        <point x="189" y="96"></point>
        <point x="180" y="89"></point>
      </polygon>
      <circle x="47" y="195" marked="true" color="-1920102913" diameter="58" filled="true"></circle>
      <circle x="195" y="195" marked="true" color="-1920102913" diameter="58" filled="true"></circle>
    </shape>
    <shape name="circle" rotatable="false" editableColorIndex="0">
      <circle x="0" y="0" marked="true" color="-1920102913" diameter="300" filled="true"></circle>
    </shape>
    <shape name="circle 2" rotatable="false" editableColorIndex="0">
      <circle x="0" y="0" marked="true" color="-1920102913" diameter="300" filled="true"></circle>
      <circle x="30" y="30" marked="false" color="255" diameter="240" filled="true"></circle>
    </shape>
    <shape name="cow" rotatable="false" editableColorIndex="0">
      <polygon color="-1920102913" filled="true" marked="true">
        <point x="200" y="193"></point>
        <point x="197" y="249"></point>
        <point x="179" y="249"></point>
        <point x="177" y="196"></point>
        <point x="166" y="187"></point>
        <point x="140" y="189"></point>
        <point x="93" y="191"></point>
        <point x="78" y="179"></point>
        <point x="72" y="211"></point>
        <point x="49" y="209"></point>
        <point x="48" y="181"></point>
        <point x="37" y="149"></point>
        <point x="25" y="120"></point>
        <point x="25" y="89"></point>
        <point x="45" y="72"></point>
        <point x="103" y="84"></point>
        <point x="179" y="75"></point>
        <point x="198" y="76"></point>
        <point x="252" y="64"></point>
        <point x="272" y="81"></point>
        <point x="293" y="103"></point>
        <point x="285" y="121"></point>
        <point x="255" y="121"></point>
        <point x="242" y="118"></point>
        <point x="224" y="167"></point>
      </polygon>
      <polygon color="-1920102913" filled="true" marked="true">
        <point x="73" y="210"></point>
        <point x="86" y="251"></point>
        <point x="62" y="249"></point>
        <point x="48" y="208"></point>
      </polygon>
      <polygon color="-1920102913" filled="true" marked="true">
        <point x="25" y="114"></point>
        <point x="16" y="195"></point>
        <point x="9" y="204"></point>
        <point x="23" y="213"></point>
        <point x="25" y="200"></point>
        <point x="39" y="123"></point>
      </polygon>
    </shape>
    <shape name="cylinder" rotatable="false" editableColorIndex="0">
      <circle x="0" y="0" marked="true" color="-1920102913" diameter="300" filled="true"></circle>
    </shape>
    <shape name="dot" rotatable="false" editableColorIndex="0">
      <circle x="90" y="90" marked="true" color="-1920102913" diameter="120" filled="true"></circle>
    </shape>
    <shape name="face happy" rotatable="false" editableColorIndex="0">
      <circle x="8" y="8" marked="true" color="-1920102913" diameter="285" filled="true"></circle>
      <circle x="60" y="75" marked="false" color="255" diameter="60" filled="true"></circle>
      <circle x="180" y="75" marked="false" color="255" diameter="60" filled="true"></circle>
      <polygon color="255" filled="true" marked="false">
        <point x="150" y="255"></point>
        <point x="90" y="239"></point>
        <point x="62" y="213"></point>
        <point x="47" y="191"></point>
        <point x="67" y="179"></point>
        <point x="90" y="203"></point>
        <point x="109" y="218"></point>
        <point x="150" y="225"></point>
        <point x="192" y="218"></point>
        <point x="210" y="203"></point>
        <point x="227" y="181"></point>
        <point x="251" y="194"></point>
        <point x="236" y="217"></point>
        <point x="212" y="240"></point>
      </polygon>
    </shape>
    <shape name="face neutral" rotatable="false" editableColorIndex="0">
      <circle x="8" y="7" marked="true" color="-1920102913" diameter="285" filled="true"></circle>
      <circle x="60" y="75" marked="false" color="255" diameter="60" filled="true"></circle>
      <circle x="180" y="75" marked="false" color="255" diameter="60" filled="true"></circle>
      <rectangle endX="240" startY="195" marked="false" color="255" endY="225" startX="60" filled="true"></rectangle>
    </shape>
    <shape name="face sad" rotatable="false" editableColorIndex="0">
      <circle x="8" y="8" marked="true" color="-1920102913" diameter="285" filled="true"></circle>
      <circle x="60" y="75" marked="false" color="255" diameter="60" filled="true"></circle>
      <circle x="180" y="75" marked="false" color="255" diameter="60" filled="true"></circle>
      <polygon color="255" filled="true" marked="false">
        <point x="150" y="168"></point>
        <point x="90" y="184"></point>
        <point x="62" y="210"></point>
        <point x="47" y="232"></point>
        <point x="67" y="244"></point>
        <point x="90" y="220"></point>
        <point x="109" y="205"></point>
        <point x="150" y="198"></point>
        <point x="192" y="205"></point>
        <point x="210" y="220"></point>
        <point x="227" y="242"></point>
        <point x="251" y="229"></point>
        <point x="236" y="206"></point>
        <point x="212" y="183"></point>
      </polygon>
    </shape>
    <shape name="fish" rotatable="false" editableColorIndex="0">
      <polygon color="-1" filled="true" marked="false">
        <point x="44" y="131"></point>
        <point x="21" y="87"></point>
        <point x="15" y="86"></point>
        <point x="0" y="120"></point>
        <point x="15" y="150"></point>
        <point x="0" y="180"></point>
        <point x="13" y="214"></point>
        <point x="20" y="212"></point>
        <point x="45" y="166"></point>
      </polygon>
      <polygon color="-1" filled="true" marked="false">
        <point x="135" y="195"></point>
        <point x="119" y="235"></point>
        <point x="95" y="218"></point>
        <point x="76" y="210"></point>
        <point x="46" y="204"></point>
        <point x="60" y="165"></point>
      </polygon>
      <polygon color="-1" filled="true" marked="false">
        <point x="75" y="45"></point>
        <point x="83" y="77"></point>
        <point x="71" y="103"></point>
        <point x="86" y="114"></point>
        <point x="166" y="78"></point>
        <point x="135" y="60"></point>
      </polygon>
      <polygon color="-1920102913" filled="true" marked="true">
        <point x="30" y="136"></point>
        <point x="151" y="77"></point>
        <point x="226" y="81"></point>
        <point x="280" y="119"></point>
        <point x="292" y="146"></point>
        <point x="292" y="160"></point>
        <point x="287" y="170"></point>
        <point x="270" y="195"></point>
        <point x="195" y="210"></point>
        <point x="151" y="212"></point>
        <point x="30" y="166"></point>
      </polygon>
      <circle x="215" y="106" marked="false" color="255" diameter="30" filled="true"></circle>
    </shape>
    <shape name="flag" rotatable="false" editableColorIndex="0">
      <rectangle endX="75" startY="15" marked="true" color="-1920102913" endY="300" startX="60" filled="true"></rectangle>
      <polygon color="-1920102913" filled="true" marked="true">
        <point x="90" y="150"></point>
        <point x="270" y="90"></point>
        <point x="90" y="30"></point>
      </polygon>
      <line endX="90" startY="135" marked="true" color="-1920102913" endY="135" startX="75"></line>
      <line endX="90" startY="45" marked="true" color="-1920102913" endY="45" startX="75"></line>
    </shape>
    <shape name="flower" rotatable="false" editableColorIndex="0">
      <polygon color="1504722175" filled="true" marked="false">
        <point x="135" y="120"></point>
        <point x="165" y="165"></point>
        <point x="180" y="210"></point>
        <point x="180" y="240"></point>
        <point x="150" y="300"></point>
        <point x="165" y="300"></point>
        <point x="195" y="240"></point>
        <point x="195" y="195"></point>
        <point x="165" y="135"></point>
      </polygon>
      <circle x="85" y="132" marked="true" color="-1920102913" diameter="38" filled="true"></circle>
      <circle x="130" y="147" marked="true" color="-1920102913" diameter="38" filled="true"></circle>
      <circle x="192" y="85" marked="true" color="-1920102913" diameter="38" filled="true"></circle>
      <circle x="85" y="40" marked="true" color="-1920102913" diameter="38" filled="true"></circle>
      <circle x="177" y="40" marked="true" color="-1920102913" diameter="38" filled="true"></circle>
      <circle x="177" y="132" marked="true" color="-1920102913" diameter="38" filled="true"></circle>
      <circle x="70" y="85" marked="true" color="-1920102913" diameter="38" filled="true"></circle>
      <circle x="130" y="25" marked="true" color="-1920102913" diameter="38" filled="true"></circle>
      <circle x="96" y="51" marked="true" color="-1920102913" diameter="108" filled="true"></circle>
      <circle x="113" y="68" marked="false" color="255" diameter="74" filled="true"></circle>
      <polygon color="1504722175" filled="true" marked="false">
        <point x="189" y="233"></point>
        <point x="219" y="188"></point>
        <point x="249" y="173"></point>
        <point x="279" y="188"></point>
        <point x="234" y="218"></point>
      </polygon>
      <polygon color="1504722175" filled="true" marked="false">
        <point x="180" y="255"></point>
        <point x="150" y="210"></point>
        <point x="105" y="210"></point>
        <point x="75" y="240"></point>
        <point x="135" y="240"></point>
      </polygon>
    </shape>
    <shape name="house" rotatable="false" editableColorIndex="0">
      <rectangle endX="255" startY="120" marked="true" color="-1920102913" endY="285" startX="45" filled="true"></rectangle>
      <rectangle endX="180" startY="210" marked="false" color="255" endY="285" startX="120" filled="true"></rectangle>
      <polygon color="-1920102913" filled="true" marked="true">
        <point x="15" y="120"></point>
        <point x="150" y="15"></point>
        <point x="285" y="120"></point>
      </polygon>
      <line endX="270" startY="120" marked="false" color="255" endY="120" startX="30"></line>
    </shape>
    <shape name="leaf" rotatable="false" editableColorIndex="0">
      <polygon color="-1920102913" filled="true" marked="true">
        <point x="150" y="210"></point>
        <point x="135" y="195"></point>
        <point x="120" y="210"></point>
        <point x="60" y="210"></point>
        <point x="30" y="195"></point>
        <point x="60" y="180"></point>
        <point x="60" y="165"></point>
        <point x="15" y="135"></point>
        <point x="30" y="120"></point>
        <point x="15" y="105"></point>
        <point x="40" y="104"></point>
        <point x="45" y="90"></point>
        <point x="60" y="90"></point>
        <point x="90" y="105"></point>
        <point x="105" y="120"></point>
        <point x="120" y="120"></point>
        <point x="105" y="60"></point>
        <point x="120" y="60"></point>
        <point x="135" y="30"></point>
        <point x="150" y="15"></point>
        <point x="165" y="30"></point>
        <point x="180" y="60"></point>
        <point x="195" y="60"></point>
        <point x="180" y="120"></point>
        <point x="195" y="120"></point>
        <point x="210" y="105"></point>
        <point x="240" y="90"></point>
        <point x="255" y="90"></point>
        <point x="263" y="104"></point>
        <point x="285" y="105"></point>
        <point x="270" y="120"></point>
        <point x="285" y="135"></point>
        <point x="240" y="165"></point>
        <point x="240" y="180"></point>
        <point x="270" y="195"></point>
        <point x="240" y="210"></point>
        <point x="180" y="210"></point>
        <point x="165" y="195"></point>
      </polygon>
      <polygon color="-1920102913" filled="true" marked="true">
        <point x="135" y="195"></point>
        <point x="135" y="240"></point>
        <point x="120" y="255"></point>
        <point x="105" y="255"></point>
        <point x="105" y="285"></point>
        <point x="135" y="285"></point>
        <point x="165" y="240"></point>
        <point x="165" y="195"></point>
      </polygon>
    </shape>
    <shape name="line" rotatable="true" editableColorIndex="0">
      <line endX="150" startY="0" marked="true" color="-1920102913" endY="300" startX="150"></line>
    </shape>
    <shape name="line half" rotatable="true" editableColorIndex="0">
      <line endX="150" startY="0" marked="true" color="-1920102913" endY="150" startX="150"></line>
    </shape>
    <shape name="pentagon" rotatable="false" editableColorIndex="0">
      <polygon color="-1920102913" filled="true" marked="true">
        <point x="150" y="15"></point>
        <point x="15" y="120"></point>
        <point x="60" y="285"></point>
        <point x="240" y="285"></point>
        <point x="285" y="120"></point>
      </polygon>
    </shape>
    <shape name="person" rotatable="false" editableColorIndex="0">
      <circle x="110" y="5" marked="true" color="-1920102913" diameter="80" filled="true"></circle>
      <polygon color="-1920102913" filled="true" marked="true">
        <point x="105" y="90"></point>
        <point x="120" y="195"></point>
        <point x="90" y="285"></point>
        <point x="105" y="300"></point>
        <point x="135" y="300"></point>
        <point x="150" y="225"></point>
        <point x="165" y="300"></point>
        <point x="195" y="300"></point>
        <point x="210" y="285"></point>
        <point x="180" y="195"></point>
        <point x="195" y="90"></point>
      </polygon>
      <rectangle endX="172" startY="79" marked="true" color="-1920102913" endY="94" startX="127" filled="true"></rectangle>
      <polygon color="-1920102913" filled="true" marked="true">
        <point x="195" y="90"></point>
        <point x="240" y="150"></point>
        <point x="225" y="180"></point>
        <point x="165" y="105"></point>
      </polygon>
      <polygon color="-1920102913" filled="true" marked="true">
        <point x="105" y="90"></point>
        <point x="60" y="150"></point>
        <point x="75" y="180"></point>
        <point x="135" y="105"></point>
      </polygon>
    </shape>
    <shape name="plant" rotatable="false" editableColorIndex="0">
      <rectangle endX="165" startY="90" marked="true" color="-1920102913" endY="300" startX="135" filled="true"></rectangle>
      <polygon color="-1920102913" filled="true" marked="true">
        <point x="135" y="255"></point>
        <point x="90" y="210"></point>
        <point x="45" y="195"></point>
        <point x="75" y="255"></point>
        <point x="135" y="285"></point>
      </polygon>
      <polygon color="-1920102913" filled="true" marked="true">
        <point x="165" y="255"></point>
        <point x="210" y="210"></point>
        <point x="255" y="195"></point>
        <point x="225" y="255"></point>
        <point x="165" y="285"></point>
      </polygon>
      <polygon color="-1920102913" filled="true" marked="true">
        <point x="135" y="180"></point>
        <point x="90" y="135"></point>
        <point x="45" y="120"></point>
        <point x="75" y="180"></point>
        <point x="135" y="210"></point>
      </polygon>
      <polygon color="-1920102913" filled="true" marked="true">
        <point x="165" y="180"></point>
        <point x="165" y="210"></point>
        <point x="225" y="180"></point>
        <point x="255" y="120"></point>
        <point x="210" y="135"></point>
      </polygon>
      <polygon color="-1920102913" filled="true" marked="true">
        <point x="135" y="105"></point>
        <point x="90" y="60"></point>
        <point x="45" y="45"></point>
        <point x="75" y="105"></point>
        <point x="135" y="135"></point>
      </polygon>
      <polygon color="-1920102913" filled="true" marked="true">
        <point x="165" y="105"></point>
        <point x="165" y="135"></point>
        <point x="225" y="105"></point>
        <point x="255" y="45"></point>
        <point x="210" y="60"></point>
      </polygon>
      <polygon color="-1920102913" filled="true" marked="true">
        <point x="135" y="90"></point>
        <point x="120" y="45"></point>
        <point x="150" y="15"></point>
        <point x="180" y="45"></point>
        <point x="165" y="90"></point>
      </polygon>
    </shape>
    <shape name="sheep" rotatable="false" editableColorIndex="15">
      <circle x="203" y="65" marked="true" color="-1" diameter="88" filled="true"></circle>
      <circle x="70" y="65" marked="true" color="-1" diameter="162" filled="true"></circle>
      <circle x="150" y="105" marked="true" color="-1" diameter="120" filled="true"></circle>
      <polygon color="-1920102913" filled="true" marked="false">
        <point x="218" y="120"></point>
        <point x="240" y="165"></point>
        <point x="255" y="165"></point>
        <point x="278" y="120"></point>
      </polygon>
      <circle x="214" y="72" marked="false" color="-1920102913" diameter="67" filled="true"></circle>
      <rectangle endX="179" startY="223" marked="true" color="-1" endY="298" startX="164" filled="true"></rectangle>
      <polygon color="-1" filled="true" marked="true">
        <point x="45" y="285"></point>
        <point x="30" y="285"></point>
        <point x="30" y="240"></point>
        <point x="15" y="195"></point>
        <point x="45" y="210"></point>
      </polygon>
      <circle x="3" y="83" marked="true" color="-1" diameter="150" filled="true"></circle>
      <rectangle endX="80" startY="221" marked="true" color="-1" endY="296" startX="65" filled="true"></rectangle>
      <polygon color="-1" filled="true" marked="true">
        <point x="195" y="285"></point>
        <point x="210" y="285"></point>
        <point x="210" y="240"></point>
        <point x="240" y="210"></point>
        <point x="195" y="210"></point>
      </polygon>
      <polygon color="-1920102913" filled="true" marked="false">
        <point x="276" y="85"></point>
        <point x="285" y="105"></point>
        <point x="302" y="99"></point>
        <point x="294" y="83"></point>
      </polygon>
      <polygon color="-1920102913" filled="true" marked="false">
        <point x="219" y="85"></point>
        <point x="210" y="105"></point>
        <point x="193" y="99"></point>
        <point x="201" y="83"></point>
      </polygon>
    </shape>
    <shape name="square" rotatable="false" editableColorIndex="0">
      <rectangle endX="270" startY="30" marked="true" color="-1920102913" endY="270" startX="30" filled="true"></rectangle>
    </shape>
    <shape name="square 2" rotatable="false" editableColorIndex="0">
      <rectangle endX="270" startY="30" marked="true" color="-1920102913" endY="270" startX="30" filled="true"></rectangle>
      <rectangle endX="240" startY="60" marked="false" color="255" endY="240" startX="60" filled="true"></rectangle>
    </shape>
    <shape name="star" rotatable="false" editableColorIndex="0">
      <polygon color="-1920102913" filled="true" marked="true">
        <point x="151" y="1"></point>
        <point x="185" y="108"></point>
        <point x="298" y="108"></point>
        <point x="207" y="175"></point>
        <point x="242" y="282"></point>
        <point x="151" y="216"></point>
        <point x="59" y="282"></point>
        <point x="94" y="175"></point>
        <point x="3" y="108"></point>
        <point x="116" y="108"></point>
      </polygon>
    </shape>
    <shape name="target" rotatable="false" editableColorIndex="0">
      <circle x="0" y="0" marked="true" color="-1920102913" diameter="300" filled="true"></circle>
      <circle x="30" y="30" marked="false" color="255" diameter="240" filled="true"></circle>
      <circle x="60" y="60" marked="true" color="-1920102913" diameter="180" filled="true"></circle>
      <circle x="90" y="90" marked="false" color="255" diameter="120" filled="true"></circle>
      <circle x="120" y="120" marked="true" color="-1920102913" diameter="60" filled="true"></circle>
    </shape>
    <shape name="tree" rotatable="false" editableColorIndex="0">
      <circle x="118" y="3" marked="true" color="-1920102913" diameter="94" filled="true"></circle>
      <rectangle endX="180" startY="195" marked="false" color="-1653716737" endY="300" startX="120" filled="true"></rectangle>
      <circle x="65" y="21" marked="true" color="-1920102913" diameter="108" filled="true"></circle>
      <circle x="116" y="41" marked="true" color="-1920102913" diameter="127" filled="true"></circle>
      <circle x="45" y="90" marked="true" color="-1920102913" diameter="120" filled="true"></circle>
      <circle x="104" y="74" marked="true" color="-1920102913" diameter="152" filled="true"></circle>
    </shape>
    <shape name="triangle" rotatable="false" editableColorIndex="0">
      <polygon color="-1920102913" filled="true" marked="true">
        <point x="150" y="30"></point>
        <point x="15" y="255"></point>
        <point x="285" y="255"></point>
      </polygon>
    </shape>
    <shape name="triangle 2" rotatable="false" editableColorIndex="0">
      <polygon color="-1920102913" filled="true" marked="true">
        <point x="150" y="30"></point>
        <point x="15" y="255"></point>
        <point x="285" y="255"></point>
      </polygon>
      <polygon color="255" filled="true" marked="false">
        <point x="151" y="99"></point>
        <point x="225" y="223"></point>
        <point x="75" y="224"></point>
      </polygon>
    </shape>
    <shape name="truck" rotatable="false" editableColorIndex="0">
      <rectangle endX="195" startY="45" marked="true" color="-1920102913" endY="187" startX="4" filled="true"></rectangle>
      <polygon color="-1920102913" filled="true" marked="true">
        <point x="296" y="193"></point>
        <point x="296" y="150"></point>
        <point x="259" y="134"></point>
        <point x="244" y="104"></point>
        <point x="208" y="104"></point>
        <point x="207" y="194"></point>
      </polygon>
      <rectangle endX="195" startY="60" marked="false" color="-1" endY="105" startX="195" filled="true"></rectangle>
      <polygon color="255" filled="true" marked="false">
        <point x="238" y="112"></point>
        <point x="252" y="141"></point>
        <point x="219" y="141"></point>
        <point x="218" y="112"></point>
      </polygon>
      <circle x="234" y="174" marked="false" color="255" diameter="42" filled="true"></circle>
      <rectangle endX="214" startY="185" marked="true" color="-1920102913" endY="194" startX="181" filled="true"></rectangle>
      <circle x="144" y="174" marked="false" color="255" diameter="42" filled="true"></circle>
      <circle x="24" y="174" marked="false" color="255" diameter="42" filled="true"></circle>
      <circle x="24" y="174" marked="true" color="-1920102913" diameter="42" filled="false"></circle>
      <circle x="144" y="174" marked="true" color="-1920102913" diameter="42" filled="false"></circle>
      <circle x="234" y="174" marked="true" color="-1920102913" diameter="42" filled="false"></circle>
    </shape>
    <shape name="turtle" rotatable="true" editableColorIndex="0">
      <polygon color="1504722175" filled="true" marked="false">
        <point x="215" y="204"></point>
        <point x="240" y="233"></point>
        <point x="246" y="254"></point>
        <point x="228" y="266"></point>
        <point x="215" y="252"></point>
        <point x="193" y="210"></point>
      </polygon>
      <polygon color="1504722175" filled="true" marked="false">
        <point x="195" y="90"></point>
        <point x="225" y="75"></point>
        <point x="245" y="75"></point>
        <point x="260" y="89"></point>
        <point x="269" y="108"></point>
        <point x="261" y="124"></point>
        <point x="240" y="105"></point>
        <point x="225" y="105"></point>
        <point x="210" y="105"></point>
      </polygon>
      <polygon color="1504722175" filled="true" marked="false">
        <point x="105" y="90"></point>
        <point x="75" y="75"></point>
        <point x="55" y="75"></point>
        <point x="40" y="89"></point>
        <point x="31" y="108"></point>
        <point x="39" y="124"></point>
        <point x="60" y="105"></point>
        <point x="75" y="105"></point>
        <point x="90" y="105"></point>
      </polygon>
      <polygon color="1504722175" filled="true" marked="false">
        <point x="132" y="85"></point>
        <point x="134" y="64"></point>
        <point x="107" y="51"></point>
        <point x="108" y="17"></point>
        <point x="150" y="2"></point>
        <point x="192" y="18"></point>
        <point x="192" y="52"></point>
        <point x="169" y="65"></point>
        <point x="172" y="87"></point>
      </polygon>
      <polygon color="1504722175" filled="true" marked="false">
        <point x="85" y="204"></point>
        <point x="60" y="233"></point>
        <point x="54" y="254"></point>
        <point x="72" y="266"></point>
        <point x="85" y="252"></point>
        <point x="107" y="210"></point>
      </polygon>
      <polygon color="-1920102913" filled="true" marked="true">
        <point x="119" y="75"></point>
        <point x="179" y="75"></point>
        <point x="209" y="101"></point>
        <point x="224" y="135"></point>
        <point x="220" y="225"></point>
        <point x="175" y="261"></point>
        <point x="128" y="261"></point>
        <point x="81" y="224"></point>
        <point x="74" y="135"></point>
        <point x="88" y="99"></point>
      </polygon>
    </shape>
    <shape name="wheel" rotatable="false" editableColorIndex="0">
      <circle x="3" y="3" marked="true" color="-1920102913" diameter="294" filled="true"></circle>
      <circle x="30" y="30" marked="false" color="255" diameter="240" filled="true"></circle>
      <line endX="150" startY="285" marked="true" color="-1920102913" endY="15" startX="150"></line>
      <line endX="285" startY="150" marked="true" color="-1920102913" endY="150" startX="15"></line>
      <circle x="120" y="120" marked="true" color="-1920102913" diameter="60" filled="true"></circle>
      <line endX="79" startY="40" marked="true" color="-1920102913" endY="269" startX="216"></line>
      <line endX="269" startY="84" marked="true" color="-1920102913" endY="221" startX="40"></line>
      <line endX="269" startY="216" marked="true" color="-1920102913" endY="79" startX="40"></line>
      <line endX="221" startY="40" marked="true" color="-1920102913" endY="269" startX="84"></line>
    </shape>
    <shape name="wolf" rotatable="false" editableColorIndex="0">
      <polygon color="255" filled="true" marked="false">
        <point x="253" y="133"></point>
        <point x="245" y="131"></point>
        <point x="245" y="133"></point>
      </polygon>
      <polygon color="-1920102913" filled="true" marked="true">
        <point x="2" y="194"></point>
        <point x="13" y="197"></point>
        <point x="30" y="191"></point>
        <point x="38" y="193"></point>
        <point x="38" y="205"></point>
        <point x="20" y="226"></point>
        <point x="20" y="257"></point>
        <point x="27" y="265"></point>
        <point x="38" y="266"></point>
        <point x="40" y="260"></point>
        <point x="31" y="253"></point>
        <point x="31" y="230"></point>
        <point x="60" y="206"></point>
        <point x="68" y="198"></point>
        <point x="75" y="209"></point>
        <point x="66" y="228"></point>
        <point x="65" y="243"></point>
        <point x="82" y="261"></point>
        <point x="84" y="268"></point>
        <point x="100" y="267"></point>
        <point x="103" y="261"></point>
        <point x="77" y="239"></point>
        <point x="79" y="231"></point>
        <point x="100" y="207"></point>
        <point x="98" y="196"></point>
        <point x="119" y="201"></point>
        <point x="143" y="202"></point>
        <point x="160" y="195"></point>
        <point x="166" y="210"></point>
        <point x="172" y="213"></point>
        <point x="173" y="238"></point>
        <point x="167" y="251"></point>
        <point x="160" y="248"></point>
        <point x="154" y="265"></point>
        <point x="169" y="264"></point>
        <point x="178" y="247"></point>
        <point x="186" y="240"></point>
        <point x="198" y="260"></point>
        <point x="200" y="271"></point>
        <point x="217" y="271"></point>
        <point x="219" y="262"></point>
        <point x="207" y="258"></point>
        <point x="195" y="230"></point>
        <point x="192" y="198"></point>
        <point x="210" y="184"></point>
        <point x="227" y="164"></point>
        <point x="242" y="144"></point>
        <point x="259" y="145"></point>
        <point x="284" y="151"></point>
        <point x="277" y="141"></point>
        <point x="293" y="140"></point>
        <point x="299" y="134"></point>
        <point x="297" y="127"></point>
        <point x="273" y="119"></point>
        <point x="270" y="105"></point>
      </polygon>
      <polygon color="-1920102913" filled="true" marked="true">
        <point x="-1" y="195"></point>
        <point x="14" y="180"></point>
        <point x="36" y="166"></point>
        <point x="40" y="153"></point>
        <point x="53" y="140"></point>
        <point x="82" y="131"></point>
        <point x="134" y="133"></point>
        <point x="159" y="126"></point>
        <point x="188" y="115"></point>
        <point x="227" y="108"></point>
        <point x="236" y="102"></point>
        <point x="238" y="98"></point>
        <point x="268" y="86"></point>
        <point x="269" y="92"></point>
        <point x="281" y="87"></point>
        <point x="269" y="103"></point>
        <point x="269" y="113"></point>
      </polygon>
    </shape>
    <shape name="x" rotatable="false" editableColorIndex="0">
      <polygon color="-1920102913" filled="true" marked="true">
        <point x="270" y="75"></point>
        <point x="225" y="30"></point>
        <point x="30" y="225"></point>
        <point x="75" y="270"></point>
      </polygon>
      <polygon color="-1920102913" filled="true" marked="true">
        <point x="30" y="75"></point>
        <point x="75" y="30"></point>
        <point x="270" y="225"></point>
        <point x="225" y="270"></point>
      </polygon>
    </shape>
  </turtleShapes>
  <linkShapes>
    <shape name="default" curviness="0.0">
      <lines>
        <line x="-0.2" visible="false">
          <dash value="0.0"></dash>
          <dash value="1.0"></dash>
        </line>
        <line x="0.0" visible="true">
          <dash value="1.0"></dash>
          <dash value="0.0"></dash>
        </line>
        <line x="0.2" visible="false">
          <dash value="0.0"></dash>
          <dash value="1.0"></dash>
        </line>
      </lines>
      <indicator>
        <shape name="link direction" rotatable="true" editableColorIndex="0">
          <line endX="90" startY="150" marked="true" color="-1920102913" endY="180" startX="150"></line>
          <line endX="210" startY="150" marked="true" color="-1920102913" endY="180" startX="150"></line>
        </shape>
      </indicator>
    </shape>
  </linkShapes>
  <previewCommands>setup repeat 75 [ go ]</previewCommands>
</model>
